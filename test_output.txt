
[1m[44m DEV [49m[22m [34mv4.0.15 [39m[90m/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine[39m

{"level":30,"time":1765872564065,"pid":445820,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"ðŸ§  AI Cache initialized (Compression enabled > 1KB, Metrics enabled)"}
{"level":40,"time":1765872564187,"pid":445820,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"No SESSION_ENCRYPTION_KEY found. Generating temporary key (sessions will be lost on restart)."}
{"level":30,"time":1765872564243,"pid":445820,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","providers":["openai","anthropic","gemini"],"default":null,"msg":"ðŸ¤– LLM Manager initialized"}
{"level":30,"time":1765872564243,"pid":445820,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"ðŸ§  AI Engine initialized"}
{"level":30,"time":1765872564814,"pid":445820,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"ðŸŒ BrowserPool initialized with max 5 browsers"}
{"level":30,"time":1765872564942,"pid":445820,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"ðŸ“¦ CacheService initialized (Distributed Backend, default TTL: 3600s)"}
{"level":40,"time":1765872564962,"pid":445820,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"No proxies configured. Running without proxy rotation."}
{"level":30,"time":1765872564975,"pid":445820,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Rate limit set for google.com: 10 req/60s"}
{"level":30,"time":1765872564975,"pid":445820,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Rate limit set for linkedin.com: 5 req/60s"}
{"level":30,"time":1765872564975,"pid":445820,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Rate limit set for facebook.com: 10 req/60s"}
{"level":30,"time":1765872564975,"pid":445820,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Rate limit set for twitter.com: 15 req/60s"}
[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2mrunPipeline[2m > [22m[2mshould run full AI pipeline successfully
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m
DEBUG: AIController resolved AIEngine: {
  useValue: {
    runPipeline: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    pageUnderstanding: { execute: [36m[Function][39m },
    selectorGeneration: { execute: [36m[Function][39m },
    schemaInference: { execute: [36m[Function][39m },
    strategyPlanning: { execute: [36m[Function][39m },
    antiBlocking: { execute: [36m[Function][39m },
    dataValidation: { execute: [36m[Function][39m },
    healthCheck: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    getStats: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    getCostStats: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    clearCache: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    resetCostTracking: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    getLLMManager: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    }
  }
}
DEBUG: pageUnderstanding: [90mundefined[39m

{"level":50,"time":1765872565193,"pid":445820,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","error":{"name":"InternalServerError","message":"this.aiEngine.runPipeline is not a function","code":"INTERNAL_SERVER_ERROR","statusCode":500,"retryable":false,"context":{"originalError":"TypeError","stack":"TypeError: this.aiEngine.runPipeline is not a function\n    at AIController.runPipeline (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:25:48)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:62:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37\n    at Traces.$ (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)\n    at trace (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/test.BT8LKgU9.js:239:21)"},"stack":"InternalServerError: this.aiEngine.runPipeline is not a function\n    at toApplicationError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:200:16)\n    at logError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:213:22)\n    at AIController.runPipeline (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:38:13)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:62:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37"},"requestId":"test-request-id","endpoint":"ai/runPipeline","msg":"Server error occurred"}
[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2mrunPipeline[2m > [22m[2mshould handle pipeline errors
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m
DEBUG: AIController resolved AIEngine: {
  useValue: {
    runPipeline: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    pageUnderstanding: { execute: [36m[Function][39m },
    selectorGeneration: { execute: [36m[Function][39m },
    schemaInference: { execute: [36m[Function][39m },
    strategyPlanning: { execute: [36m[Function][39m },
    antiBlocking: { execute: [36m[Function][39m },
    dataValidation: { execute: [36m[Function][39m },
    healthCheck: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    getStats: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    getCostStats: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    clearCache: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    resetCostTracking: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    getLLMManager: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    }
  }
}
DEBUG: pageUnderstanding: [90mundefined[39m

[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2munderstandPage[2m > [22m[2mshould understand page successfully
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m
DEBUG: AIController resolved AIEngine: {
  useValue: {
    runPipeline: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    pageUnderstanding: { execute: [36m[Function][39m },
    selectorGeneration: { execute: [36m[Function][39m },
    schemaInference: { execute: [36m[Function][39m },
    strategyPlanning: { execute: [36m[Function][39m },
    antiBlocking: { execute: [36m[Function][39m },
    dataValidation: { execute: [36m[Function][39m },
    healthCheck: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    getStats: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    getCostStats: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    clearCache: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    resetCostTracking: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    getLLMManager: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    }
  }
}
DEBUG: pageUnderstanding: [90mundefined[39m

[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2mgenerateSelectors[2m > [22m[2mshould generate selectors successfully
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m
DEBUG: AIController resolved AIEngine: {
  useValue: {
    runPipeline: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    pageUnderstanding: { execute: [36m[Function][39m },
    selectorGeneration: { execute: [36m[Function][39m },
    schemaInference: { execute: [36m[Function][39m },
    strategyPlanning: { execute: [36m[Function][39m },
    antiBlocking: { execute: [36m[Function][39m },
    dataValidation: { execute: [36m[Function][39m },
    healthCheck: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    getStats: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    getCostStats: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    clearCache: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    resetCostTracking: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    getLLMManager: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    }
  }
}
DEBUG: pageUnderstanding: [90mundefined[39m

[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2minferSchema[2m > [22m[2mshould infer schema successfully
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m
DEBUG: AIController resolved AIEngine: {
  useValue: {
    runPipeline: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    pageUnderstanding: { execute: [36m[Function][39m },
    selectorGeneration: { execute: [36m[Function][39m },
    schemaInference: { execute: [36m[Function][39m },
    strategyPlanning: { execute: [36m[Function][39m },
    antiBlocking: { execute: [36m[Function][39m },
    dataValidation: { execute: [36m[Function][39m },
    healthCheck: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    getStats: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    getCostStats: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    clearCache: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    resetCostTracking: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    getLLMManager: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    }
  }
}
DEBUG: pageUnderstanding: [90mundefined[39m

[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2mplanStrategy[2m > [22m[2mshould plan strategy successfully
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m
DEBUG: AIController resolved AIEngine: {
  useValue: {
    runPipeline: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    pageUnderstanding: { execute: [36m[Function][39m },
    selectorGeneration: { execute: [36m[Function][39m },
    schemaInference: { execute: [36m[Function][39m },
    strategyPlanning: { execute: [36m[Function][39m },
    antiBlocking: { execute: [36m[Function][39m },
    dataValidation: { execute: [36m[Function][39m },
    healthCheck: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    getStats: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    getCostStats: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    clearCache: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    resetCostTracking: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    getLLMManager: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    }
  }
}
DEBUG: pageUnderstanding: [90mundefined[39m

[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2manalyzeBlocking[2m > [22m[2mshould analyze blocking successfully
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m
DEBUG: AIController resolved AIEngine: {
  useValue: {
    runPipeline: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    pageUnderstanding: { execute: [36m[Function][39m },
    selectorGeneration: { execute: [36m[Function][39m },
    schemaInference: { execute: [36m[Function][39m },
    strategyPlanning: { execute: [36m[Function][39m },
    antiBlocking: { execute: [36m[Function][39m },
    dataValidation: { execute: [36m[Function][39m },
    healthCheck: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    getStats: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    getCostStats: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    clearCache: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    resetCostTracking: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    getLLMManager: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    }
  }
}
DEBUG: pageUnderstanding: [90mundefined[39m

[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2mvalidateData[2m > [22m[2mshould validate data successfully
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m
DEBUG: AIController resolved AIEngine: {
  useValue: {
    runPipeline: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    pageUnderstanding: { execute: [36m[Function][39m },
    selectorGeneration: { execute: [36m[Function][39m },
    schemaInference: { execute: [36m[Function][39m },
    strategyPlanning: { execute: [36m[Function][39m },
    antiBlocking: { execute: [36m[Function][39m },
    dataValidation: { execute: [36m[Function][39m },
    healthCheck: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    getStats: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    getCostStats: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    clearCache: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    resetCostTracking: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    getLLMManager: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    }
  }
}
DEBUG: pageUnderstanding: [90mundefined[39m

[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2mvalidateData[2m > [22m[2mshould return validation errors
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m
DEBUG: AIController resolved AIEngine: {
  useValue: {
    runPipeline: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    pageUnderstanding: { execute: [36m[Function][39m },
    selectorGeneration: { execute: [36m[Function][39m },
    schemaInference: { execute: [36m[Function][39m },
    strategyPlanning: { execute: [36m[Function][39m },
    antiBlocking: { execute: [36m[Function][39m },
    dataValidation: { execute: [36m[Function][39m },
    healthCheck: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    getStats: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    getCostStats: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    clearCache: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    resetCostTracking: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    getLLMManager: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    }
  }
}
DEBUG: pageUnderstanding: [90mundefined[39m

[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2mhealthCheck[2m > [22m[2mshould return healthy status
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m
DEBUG: AIController resolved AIEngine: {
  useValue: {
    runPipeline: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    pageUnderstanding: { execute: [36m[Function][39m },
    selectorGeneration: { execute: [36m[Function][39m },
    schemaInference: { execute: [36m[Function][39m },
    strategyPlanning: { execute: [36m[Function][39m },
    antiBlocking: { execute: [36m[Function][39m },
    dataValidation: { execute: [36m[Function][39m },
    healthCheck: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    getStats: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    getCostStats: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    clearCache: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    resetCostTracking: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    getLLMManager: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    }
  }
}
DEBUG: pageUnderstanding: [90mundefined[39m

[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2mhealthCheck[2m > [22m[2mshould return degraded status when component unhealthy
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m
DEBUG: AIController resolved AIEngine: {
  useValue: {
    runPipeline: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    pageUnderstanding: { execute: [36m[Function][39m },
    selectorGeneration: { execute: [36m[Function][39m },
    schemaInference: { execute: [36m[Function][39m },
    strategyPlanning: { execute: [36m[Function][39m },
    antiBlocking: { execute: [36m[Function][39m },
    dataValidation: { execute: [36m[Function][39m },
    healthCheck: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    getStats: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    getCostStats: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    clearCache: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    resetCostTracking: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    getLLMManager: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    }
  }
}
DEBUG: pageUnderstanding: [90mundefined[39m

[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2mgetCostStats[2m > [22m[2mshould return cost statistics
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m
DEBUG: AIController resolved AIEngine: {
  useValue: {
    runPipeline: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    pageUnderstanding: { execute: [36m[Function][39m },
    selectorGeneration: { execute: [36m[Function][39m },
    schemaInference: { execute: [36m[Function][39m },
    strategyPlanning: { execute: [36m[Function][39m },
    antiBlocking: { execute: [36m[Function][39m },
    dataValidation: { execute: [36m[Function][39m },
    healthCheck: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    getStats: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    getCostStats: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    clearCache: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    resetCostTracking: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    getLLMManager: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    }
  }
}
DEBUG: pageUnderstanding: [90mundefined[39m

[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2mclearCache[2m > [22m[2mshould clear cache successfully
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m
DEBUG: AIController resolved AIEngine: {
  useValue: {
    runPipeline: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    pageUnderstanding: { execute: [36m[Function][39m },
    selectorGeneration: { execute: [36m[Function][39m },
    schemaInference: { execute: [36m[Function][39m },
    strategyPlanning: { execute: [36m[Function][39m },
    antiBlocking: { execute: [36m[Function][39m },
    dataValidation: { execute: [36m[Function][39m },
    healthCheck: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    getStats: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    getCostStats: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    clearCache: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    resetCostTracking: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    getLLMManager: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    }
  }
}
DEBUG: pageUnderstanding: [90mundefined[39m

[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2mresetCostTracking[2m > [22m[2mshould reset cost tracking successfully
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m
DEBUG: AIController resolved AIEngine: {
  useValue: {
    runPipeline: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    pageUnderstanding: { execute: [36m[Function][39m },
    selectorGeneration: { execute: [36m[Function][39m },
    schemaInference: { execute: [36m[Function][39m },
    strategyPlanning: { execute: [36m[Function][39m },
    antiBlocking: { execute: [36m[Function][39m },
    dataValidation: { execute: [36m[Function][39m },
    healthCheck: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    getStats: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    getCostStats: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    clearCache: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    resetCostTracking: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    },
    getLLMManager: [Function: Mock] {
      _isMockFunction: [33mtrue[39m,
      getMockImplementation: [36m[Function (anonymous)][39m,
      mock: [36m[Object][39m,
      mockImplementation: [36m[Function: mockImplementation][39m,
      mockImplementationOnce: [36m[Function: mockImplementationOnce][39m,
      withImplementation: [36m[Function: withImplementation][39m,
      mockReturnThis: [36m[Function: mockReturnThis][39m,
      mockReturnValue: [36m[Function: mockReturnValue][39m,
      mockReturnValueOnce: [36m[Function: mockReturnValueOnce][39m,
      mockResolvedValue: [36m[Function: mockResolvedValue][39m,
      mockResolvedValueOnce: [36m[Function: mockResolvedValueOnce][39m,
      mockRejectedValue: [36m[Function: mockRejectedValue][39m,
      mockRejectedValueOnce: [36m[Function: mockRejectedValueOnce][39m,
      mockClear: [36m[Function: mockClear][39m,
      mockReset: [36m[Function: mockReset][39m,
      mockRestore: [36m[Function: mockRestore][39m,
      mockName: [36m[Function: mockName][39m,
      getMockName: [36m[Function: getMockName][39m,
      [32mSymbol(Symbol.dispose)[39m: [36m[Function (anonymous)][39m
    }
  }
}
DEBUG: pageUnderstanding: [90mundefined[39m

{"level":40,"time":1765872565200,"pid":445820,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
{"level":50,"time":1765872565205,"pid":445820,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","error":{"name":"InternalServerError","message":"this.aiEngine.runPipeline is not a function","code":"INTERNAL_SERVER_ERROR","statusCode":500,"retryable":false,"context":{"originalError":"TypeError","stack":"TypeError: this.aiEngine.runPipeline is not a function\n    at AIController.runPipeline (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:25:48)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:77:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37\n    at Traces.$ (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)\n    at trace (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/test.BT8LKgU9.js:239:21)"},"stack":"InternalServerError: this.aiEngine.runPipeline is not a function\n    at toApplicationError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:200:16)\n    at logError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:213:22)\n    at AIController.runPipeline (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:38:13)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:77:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37"},"requestId":"test-request-id","endpoint":"ai/runPipeline","msg":"Server error occurred"}
{"level":40,"time":1765872565210,"pid":445820,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
{"level":50,"time":1765872565212,"pid":445820,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","error":{"name":"InternalServerError","message":"Cannot read properties of undefined (reading 'execute')","code":"INTERNAL_SERVER_ERROR","statusCode":500,"retryable":false,"context":{"originalError":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'execute')\n    at AIController.understandPage (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:54:66)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:103:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37\n    at Traces.$ (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)\n    at trace (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/test.BT8LKgU9.js:239:21)"},"stack":"InternalServerError: Cannot read properties of undefined (reading 'execute')\n    at toApplicationError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:200:16)\n    at logError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:213:22)\n    at AIController.understandPage (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:62:13)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:103:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37"},"requestId":"test-request-id","endpoint":"ai/understandPage","msg":"Server error occurred"}
{"level":40,"time":1765872565218,"pid":445820,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
{"level":50,"time":1765872565221,"pid":445820,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","error":{"name":"InternalServerError","message":"Cannot read properties of undefined (reading 'execute')","code":"INTERNAL_SERVER_ERROR","statusCode":500,"retryable":false,"context":{"originalError":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'execute')\n    at AIController.generateSelectors (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:78:67)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:123:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37\n    at Traces.$ (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)\n    at trace (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/test.BT8LKgU9.js:239:21)"},"stack":"InternalServerError: Cannot read properties of undefined (reading 'execute')\n    at toApplicationError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:200:16)\n    at logError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:213:22)\n    at AIController.generateSelectors (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:86:13)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:123:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37"},"requestId":"test-request-id","endpoint":"ai","msg":"Server error occurred"}
{"level":40,"time":1765872565223,"pid":445820,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
{"level":50,"time":1765872565226,"pid":445820,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","error":{"name":"InternalServerError","message":"Cannot read properties of undefined (reading 'execute')","code":"INTERNAL_SERVER_ERROR","statusCode":500,"retryable":false,"context":{"originalError":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'execute')\n    at AIController.inferSchema (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:102:64)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:147:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37\n    at Traces.$ (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)\n    at trace (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/test.BT8LKgU9.js:239:21)"},"stack":"InternalServerError: Cannot read properties of undefined (reading 'execute')\n    at toApplicationError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:200:16)\n    at logError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:213:22)\n    at AIController.inferSchema (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:110:13)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:147:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37"},"requestId":"test-request-id","endpoint":"ai","msg":"Server error occurred"}
{"level":40,"time":1765872565229,"pid":445820,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
{"level":50,"time":1765872565233,"pid":445820,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","error":{"name":"InternalServerError","message":"Cannot read properties of undefined (reading 'execute')","code":"INTERNAL_SERVER_ERROR","statusCode":500,"retryable":false,"context":{"originalError":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'execute')\n    at AIController.planStrategy (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:126:65)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:168:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37\n    at Traces.$ (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)\n    at trace (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/test.BT8LKgU9.js:239:21)"},"stack":"InternalServerError: Cannot read properties of undefined (reading 'execute')\n    at toApplicationError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:200:16)\n    at logError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:213:22)\n    at AIController.planStrategy (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:134:13)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:168:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37"},"requestId":"test-request-id","endpoint":"ai","msg":"Server error occurred"}
{"level":40,"time":1765872565235,"pid":445820,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
 [31mâ¯[39m tests/unit/api/ai.controller.test.ts [2m([22m[2m14 tests[22m[2m | [22m[31m13 failed[39m[2m)[22m[32m 85[2mms[22m[39m
[31m       [31mÃ—[31m should run full AI pipeline successfully[39m[32m 19[2mms[22m[39m
       [32mâœ“[39m should handle pipeline errors[32m 10[2mms[22m[39m
[31m       [31mÃ—[31m should understand page successfully[39m[32m 8[2mms[22m[39m
[31m       [31mÃ—[31m should generate selectors successfully[39m[32m 4[2mms[22m[39m
[31m       [31mÃ—[31m should infer schema successfully[39m[32m 7[2mms[22m[39m
[31m       [31mÃ—[31m should plan strategy successfully[39m[32m 6[2mms[22m[39m
[31m       [31mÃ—[31m should analyze blocking successfully[39m[32m 4[2mms[22m[39m
[31m       [31mÃ—[31m should validate data successfully[39m[32m 4[2mms[22m[39m
[31m       [31mÃ—[31m should return validation errors[39m[32m 4[2mms[22m[39m
[31m       [31mÃ—[31m should return healthy status[39m[32m 4[2mms[22m[39m
[31m       [31mÃ—[31m should return degraded status when component unhealthy[39m[32m 3[2mms[22m[39m
[31m       [31mÃ—[31m should return cost statistics[39m[32m 4[2mms[22m[39m
[31m       [31mÃ—[31m should clear cache successfully[39m[32m 3[2mms[22m[39m
[31m       [31mÃ—[31m should reset cost tracking successfully[39m[32m 3[2mms[22m[39m
{"level":50,"time":1765872565238,"pid":445820,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","error":{"name":"InternalServerError","message":"Cannot read properties of undefined (reading 'execute')","code":"INTERNAL_SERVER_ERROR","statusCode":500,"retryable":false,"context":{"originalError":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'execute')\n    at AIController.analyzeBlocking (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:150:61)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:189:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37\n    at Traces.$ (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)\n    at trace (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/test.BT8LKgU9.js:239:21)"},"stack":"InternalServerError: Cannot read properties of undefined (reading 'execute')\n    at toApplicationError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:200:16)\n    at logError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:213:22)\n    at AIController.analyzeBlocking (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:158:13)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:189:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37"},"requestId":"test-request-id","endpoint":"ai","msg":"Server error occurred"}
{"level":40,"time":1765872565239,"pid":445820,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
{"level":50,"time":1765872565242,"pid":445820,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","error":{"name":"InternalServerError","message":"Cannot read properties of undefined (reading 'execute')","code":"INTERNAL_SERVER_ERROR","statusCode":500,"retryable":false,"context":{"originalError":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'execute')\n    at AIController.validateData (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:174:63)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:210:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37\n    at Traces.$ (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)\n    at trace (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/test.BT8LKgU9.js:239:21)"},"stack":"InternalServerError: Cannot read properties of undefined (reading 'execute')\n    at toApplicationError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:200:16)\n    at logError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:213:22)\n    at AIController.validateData (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:182:13)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:210:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37"},"requestId":"test-request-id","endpoint":"ai","msg":"Server error occurred"}
{"level":40,"time":1765872565243,"pid":445820,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
{"level":50,"time":1765872565245,"pid":445820,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","error":{"name":"InternalServerError","message":"Cannot read properties of undefined (reading 'execute')","code":"INTERNAL_SERVER_ERROR","statusCode":500,"retryable":false,"context":{"originalError":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'execute')\n    at AIController.validateData (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:174:63)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:229:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37\n    at Traces.$ (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)\n    at trace (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/test.BT8LKgU9.js:239:21)"},"stack":"InternalServerError: Cannot read properties of undefined (reading 'execute')\n    at toApplicationError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:200:16)\n    at logError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:213:22)\n    at AIController.validateData (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:182:13)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:229:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37"},"requestId":"test-request-id","endpoint":"ai","msg":"Server error occurred"}
{"level":40,"time":1765872565247,"pid":445820,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
{"level":50,"time":1765872565249,"pid":445820,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","error":{"name":"InternalServerError","message":"this.aiEngine.healthCheck is not a function","code":"INTERNAL_SERVER_ERROR","statusCode":500,"retryable":false,"context":{"originalError":"TypeError","stack":"TypeError: this.aiEngine.healthCheck is not a function\n    at AIController.healthCheck (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:192:48)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:249:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37\n    at Traces.$ (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)\n    at trace (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/test.BT8LKgU9.js:239:21)"},"stack":"InternalServerError: this.aiEngine.healthCheck is not a function\n    at toApplicationError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:200:16)\n    at logError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:213:22)\n    at AIController.healthCheck (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:204:13)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:249:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37"},"requestId":"test-request-id","endpoint":"ai","msg":"Server error occurred"}
{"level":40,"time":1765872565251,"pid":445820,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
{"level":50,"time":1765872565253,"pid":445820,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","error":{"name":"InternalServerError","message":"this.aiEngine.healthCheck is not a function","code":"INTERNAL_SERVER_ERROR","statusCode":500,"retryable":false,"context":{"originalError":"TypeError","stack":"TypeError: this.aiEngine.healthCheck is not a function\n    at AIController.healthCheck (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:192:48)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:271:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37\n    at Traces.$ (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)\n    at trace (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/test.BT8LKgU9.js:239:21)"},"stack":"InternalServerError: this.aiEngine.healthCheck is not a function\n    at toApplicationError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:200:16)\n    at logError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:213:22)\n    at AIController.healthCheck (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:204:13)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:271:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37"},"requestId":"test-request-id","endpoint":"ai","msg":"Server error occurred"}
{"level":40,"time":1765872565254,"pid":445820,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
{"level":50,"time":1765872565257,"pid":445820,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","error":{"name":"InternalServerError","message":"this.aiEngine.getCostStats is not a function","code":"INTERNAL_SERVER_ERROR","statusCode":500,"retryable":false,"context":{"originalError":"TypeError","stack":"TypeError: this.aiEngine.getCostStats is not a function\n    at AIController.getCostStats (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:214:41)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:292:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37\n    at Traces.$ (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)\n    at trace (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/test.BT8LKgU9.js:239:21)"},"stack":"InternalServerError: this.aiEngine.getCostStats is not a function\n    at toApplicationError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:200:16)\n    at logError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:213:22)\n    at AIController.getCostStats (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:222:13)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:292:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37"},"requestId":"test-request-id","endpoint":"ai","msg":"Server error occurred"}
{"level":40,"time":1765872565259,"pid":445820,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
{"level":50,"time":1765872565260,"pid":445820,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","error":{"name":"InternalServerError","message":"this.aiEngine.clearCache is not a function","code":"INTERNAL_SERVER_ERROR","statusCode":500,"retryable":false,"context":{"originalError":"TypeError","stack":"TypeError: this.aiEngine.clearCache is not a function\n    at AIController.clearCache (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:232:33)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:312:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37\n    at Traces.$ (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)\n    at trace (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/test.BT8LKgU9.js:239:21)"},"stack":"InternalServerError: this.aiEngine.clearCache is not a function\n    at toApplicationError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:200:16)\n    at logError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:213:22)\n    at AIController.clearCache (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:240:13)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:312:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37"},"requestId":"test-request-id","endpoint":"ai","msg":"Server error occurred"}
{"level":40,"time":1765872565261,"pid":445820,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
{"level":50,"time":1765872565264,"pid":445820,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","error":{"name":"InternalServerError","message":"this.aiEngine.resetCostTracking is not a function","code":"INTERNAL_SERVER_ERROR","statusCode":500,"retryable":false,"context":{"originalError":"TypeError","stack":"TypeError: this.aiEngine.resetCostTracking is not a function\n    at AIController.resetCostTracking (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:250:27)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:330:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37\n    at Traces.$ (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)\n    at trace (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/test.BT8LKgU9.js:239:21)"},"stack":"InternalServerError: this.aiEngine.resetCostTracking is not a function\n    at toApplicationError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:200:16)\n    at logError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:213:22)\n    at AIController.resetCostTracking (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:258:13)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:330:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37"},"requestId":"test-request-id","endpoint":"ai/resetCostTracking","msg":"Server error occurred"}

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m[1m[41m Failed Tests 13 [49m[22m[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[41m[1m FAIL [22m[49m tests/unit/api/ai.controller.test.ts[2m > [22mAIController[2m > [22mrunPipeline[2m > [22mshould run full AI pipeline successfully
[31m[1mAssertionError[22m: expected "vi.fn()" to be called at least once[39m
[36m [2mâ¯[22m tests/unit/api/ai.controller.test.ts:[2m64:46[22m[39m
    [90m 62| [39m            [35mawait[39m controller[33m.[39m[34mrunPipeline[39m(req[33m,[39m res)[33m;[39m
    [90m 63| [39m
    [90m 64| [39m            [34mexpect[39m(mockAIEngine[33m.[39mrunPipeline)[33m.[39m[34mtoHaveBeenCalled[39m()[33m;[39m
    [90m   | [39m                                             [31m^[39m
    [90m 65| [39m            [34mexpect[39m(res[33m.[39mjson)[33m.[39m[34mtoHaveBeenCalledWith[39m(mockResult)[33m;[39m
    [90m 66| [39m        })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/13]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/api/ai.controller.test.ts[2m > [22mAIController[2m > [22munderstandPage[2m > [22mshould understand page successfully
[31m[1mAssertionError[22m: expected "vi.fn()" to be called with arguments: [ { â€¦(2) } ][90m

Received: 

[1m  1st vi.fn() call:

[22m[2m  [[22m
[2m    {[22m
[32m-     "dataTypes": [[90m
[32m-       "products",[90m
[32m-       "prices",[90m
[32m-     ],[90m
[32m-     "purpose": "E-commerce product page",[90m
[31m+     "error": "Cannot read properties of undefined (reading 'execute')",[90m
[2m    },[22m
[2m  ][22m
[31m[90m

Number of calls: [1m1[22m
[31m[39m
[36m [2mâ¯[22m tests/unit/api/ai.controller.test.ts:[2m105:30[22m[39m
    [90m103| [39m            [35mawait[39m controller[33m.[39m[34munderstandPage[39m(req[33m,[39m res)[33m;[39m
    [90m104| [39m
    [90m105| [39m            [34mexpect[39m(res[33m.[39mjson)[33m.[39m[34mtoHaveBeenCalledWith[39m(mockUnderstanding)[33m;[39m
    [90m   | [39m                             [31m^[39m
    [90m106| [39m        })[33m;[39m
    [90m107| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/13]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/api/ai.controller.test.ts[2m > [22mAIController[2m > [22mgenerateSelectors[2m > [22mshould generate selectors successfully
[31m[1mAssertionError[22m: expected "vi.fn()" to be called with arguments: [ { price: '.price' } ][90m

Received: 

[1m  1st vi.fn() call:

[22m[2m  [[22m
[2m    {[22m
[32m-     "price": ".price",[90m
[31m+     "error": "Cannot read properties of undefined (reading 'execute')",[90m
[2m    },[22m
[2m  ][22m
[31m[90m

Number of calls: [1m1[22m
[31m[39m
[36m [2mâ¯[22m tests/unit/api/ai.controller.test.ts:[2m125:30[22m[39m
    [90m123| [39m            [35mawait[39m controller[33m.[39m[34mgenerateSelectors[39m(req[33m,[39m res)[33m;[39m
    [90m124| [39m
    [90m125| [39m            [34mexpect[39m(res[33m.[39mjson)[33m.[39m[34mtoHaveBeenCalledWith[39m(mockSelectors)[33m;[39m
    [90m   | [39m                             [31m^[39m
    [90m126| [39m        })[33m;[39m
    [90m127| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[3/13]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/api/ai.controller.test.ts[2m > [22mAIController[2m > [22minferSchema[2m > [22mshould infer schema successfully
[31m[1mAssertionError[22m: expected "vi.fn()" to be called with arguments: [ { type: 'object', â€¦(1) } ][90m

Received: 

[1m  1st vi.fn() call:

[22m[2m  [[22m
[2m    {[22m
[32m-     "properties": {[90m
[32m-       "price": {[90m
[32m-         "type": "number",[90m
[32m-       },[90m
[32m-       "title": {[90m
[32m-         "type": "string",[90m
[32m-       },[90m
[32m-     },[90m
[32m-     "type": "object",[90m
[31m+     "error": "Cannot read properties of undefined (reading 'execute')",[90m
[2m    },[22m
[2m  ][22m
[31m[90m

Number of calls: [1m1[22m
[31m[39m
[36m [2mâ¯[22m tests/unit/api/ai.controller.test.ts:[2m149:30[22m[39m
    [90m147| [39m            [35mawait[39m controller[33m.[39m[34minferSchema[39m(req[33m,[39m res)[33m;[39m
    [90m148| [39m
    [90m149| [39m            [34mexpect[39m(res[33m.[39mjson)[33m.[39m[34mtoHaveBeenCalledWith[39m(mockSchema)[33m;[39m
    [90m   | [39m                             [31m^[39m
    [90m150| [39m        })[33m;[39m
    [90m151| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[4/13]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/api/ai.controller.test.ts[2m > [22mAIController[2m > [22mplanStrategy[2m > [22mshould plan strategy successfully
[31m[1mAssertionError[22m: expected "vi.fn()" to be called with arguments: [ { approach: 'pagination', â€¦(1) } ][90m

Received: 

[1m  1st vi.fn() call:

[22m[2m  [[22m
[2m    {[22m
[32m-     "approach": "pagination",[90m
[32m-     "steps": [[90m
[32m-       "navigate",[90m
[32m-       "extract",[90m
[32m-       "next-page",[90m
[32m-     ],[90m
[31m+     "error": "Cannot read properties of undefined (reading 'execute')",[90m
[2m    },[22m
[2m  ][22m
[31m[90m

Number of calls: [1m1[22m
[31m[39m
[36m [2mâ¯[22m tests/unit/api/ai.controller.test.ts:[2m170:30[22m[39m
    [90m168| [39m            [35mawait[39m controller[33m.[39m[34mplanStrategy[39m(req[33m,[39m res)[33m;[39m
    [90m169| [39m
    [90m170| [39m            [34mexpect[39m(res[33m.[39mjson)[33m.[39m[34mtoHaveBeenCalledWith[39m(mockStrategy)[33m;[39m
    [90m   | [39m                             [31m^[39m
    [90m171| [39m        })[33m;[39m
    [90m172| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[5/13]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/api/ai.controller.test.ts[2m > [22mAIController[2m > [22manalyzeBlocking[2m > [22mshould analyze blocking successfully
[31m[1mAssertionError[22m: expected "vi.fn()" to be called with arguments: [ { hasCaptcha: true, â€¦(1) } ][90m

Received: 

[1m  1st vi.fn() call:

[22m[2m  [[22m
[2m    {[22m
[32m-     "hasCaptcha": true,[90m
[32m-     "hasRateLimit": false,[90m
[31m+     "error": "Cannot read properties of undefined (reading 'execute')",[90m
[2m    },[22m
[2m  ][22m
[31m[90m

Number of calls: [1m1[22m
[31m[39m
[36m [2mâ¯[22m tests/unit/api/ai.controller.test.ts:[2m191:30[22m[39m
    [90m189| [39m            [35mawait[39m controller[33m.[39m[34manalyzeBlocking[39m(req[33m,[39m res)[33m;[39m
    [90m190| [39m
    [90m191| [39m            [34mexpect[39m(res[33m.[39mjson)[33m.[39m[34mtoHaveBeenCalledWith[39m(mockAnalysis)[33m;[39m
    [90m   | [39m                             [31m^[39m
    [90m192| [39m        })[33m;[39m
    [90m193| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[6/13]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/api/ai.controller.test.ts[2m > [22mAIController[2m > [22mvalidateData[2m > [22mshould validate data successfully
[31m[1mAssertionError[22m: expected "vi.fn()" to be called with arguments: [ { isValid: true, errors: [] } ][90m

Received: 

[1m  1st vi.fn() call:

[22m[2m  [[22m
[2m    {[22m
[32m-     "errors": [],[90m
[32m-     "isValid": true,[90m
[31m+     "error": "Cannot read properties of undefined (reading 'execute')",[90m
[2m    },[22m
[2m  ][22m
[31m[90m

Number of calls: [1m1[22m
[31m[39m
[36m [2mâ¯[22m tests/unit/api/ai.controller.test.ts:[2m212:30[22m[39m
    [90m210| [39m            [35mawait[39m controller[33m.[39m[34mvalidateData[39m(req[33m,[39m res)[33m;[39m
    [90m211| [39m
    [90m212| [39m            [34mexpect[39m(res[33m.[39mjson)[33m.[39m[34mtoHaveBeenCalledWith[39m(mockValidation)[33m;[39m
    [90m   | [39m                             [31m^[39m
    [90m213| [39m        })[33m;[39m
    [90m214| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[7/13]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/api/ai.controller.test.ts[2m > [22mAIController[2m > [22mvalidateData[2m > [22mshould return validation errors
[31m[1mAssertionError[22m: expected "vi.fn()" to be called with arguments: [ { isValid: false, â€¦(1) } ][90m

Received: 

[1m  1st vi.fn() call:

[22m[2m  [[22m
[2m    {[22m
[32m-     "errors": [[90m
[32m-       "price must be a number",[90m
[32m-     ],[90m
[32m-     "isValid": false,[90m
[31m+     "error": "Cannot read properties of undefined (reading 'execute')",[90m
[2m    },[22m
[2m  ][22m
[31m[90m

Number of calls: [1m1[22m
[31m[39m
[36m [2mâ¯[22m tests/unit/api/ai.controller.test.ts:[2m231:30[22m[39m
    [90m229| [39m            [35mawait[39m controller[33m.[39m[34mvalidateData[39m(req[33m,[39m res)[33m;[39m
    [90m230| [39m
    [90m231| [39m            [34mexpect[39m(res[33m.[39mjson)[33m.[39m[34mtoHaveBeenCalledWith[39m(mockValidation)[33m;[39m
    [90m   | [39m                             [31m^[39m
    [90m232| [39m        })[33m;[39m
    [90m233| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[8/13]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/api/ai.controller.test.ts[2m > [22mAIController[2m > [22mhealthCheck[2m > [22mshould return healthy status
[31m[1mAssertionError[22m: expected "vi.fn()" to be called with arguments: [ 200 ][90m

Received: 

[1m  1st vi.fn() call:

[22m[2m  [[22m
[32m-   200,[90m
[31m+   500,[90m
[2m  ][22m
[31m[90m

Number of calls: [1m1[22m
[31m[39m
[36m [2mâ¯[22m tests/unit/api/ai.controller.test.ts:[2m251:32[22m[39m
    [90m249| [39m            [35mawait[39m controller[33m.[39m[34mhealthCheck[39m(req[33m,[39m res)[33m;[39m
    [90m250| [39m
    [90m251| [39m            [34mexpect[39m(res[33m.[39mstatus)[33m.[39m[34mtoHaveBeenCalledWith[39m([34m200[39m)[33m;[39m
    [90m   | [39m                               [31m^[39m
    [90m252| [39m            [34mexpect[39m(res[33m.[39mjson)[33m.[39m[34mtoHaveBeenCalledWith[39m(
    [90m253| [39m                expect[33m.[39m[34mobjectContaining[39m({

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[9/13]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/api/ai.controller.test.ts[2m > [22mAIController[2m > [22mhealthCheck[2m > [22mshould return degraded status when component unhealthy
[31m[1mAssertionError[22m: expected "vi.fn()" to be called with arguments: [ 503 ][90m

Received: 

[1m  1st vi.fn() call:

[22m[2m  [[22m
[32m-   503,[90m
[31m+   500,[90m
[2m  ][22m
[31m[90m

Number of calls: [1m1[22m
[31m[39m
[36m [2mâ¯[22m tests/unit/api/ai.controller.test.ts:[2m273:32[22m[39m
    [90m271| [39m            [35mawait[39m controller[33m.[39m[34mhealthCheck[39m(req[33m,[39m res)[33m;[39m
    [90m272| [39m
    [90m273| [39m            [34mexpect[39m(res[33m.[39mstatus)[33m.[39m[34mtoHaveBeenCalledWith[39m([34m503[39m)[33m;[39m
    [90m   | [39m                               [31m^[39m
    [90m274| [39m            [34mexpect[39m(res[33m.[39mjson)[33m.[39m[34mtoHaveBeenCalledWith[39m(
    [90m275| [39m                expect[33m.[39m[34mobjectContaining[39m({

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[10/13]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/api/ai.controller.test.ts[2m > [22mAIController[2m > [22mgetCostStats[2m > [22mshould return cost statistics
[31m[1mAssertionError[22m: expected "vi.fn()" to be called with arguments: [ { success: true, â€¦(2) } ][90m

Received: 

[1m  1st vi.fn() call:

[22m[2m  [[22m
[2m    {[22m
[32m-     "data": ObjectContaining {[90m
[32m-       "requestCount": 1000,[90m
[32m-       "totalCost": 12.5,[90m
[32m-     },[90m
[32m-     "success": true,[90m
[32m-     "timestamp": Any<String>,[90m
[31m+     "error": "this.aiEngine.getCostStats is not a function",[90m
[2m    },[22m
[2m  ][22m
[31m[90m

Number of calls: [1m1[22m
[31m[39m
[36m [2mâ¯[22m tests/unit/api/ai.controller.test.ts:[2m294:30[22m[39m
    [90m292| [39m            [35mawait[39m controller[33m.[39m[34mgetCostStats[39m(req[33m,[39m res)[33m;[39m
    [90m293| [39m
    [90m294| [39m            [34mexpect[39m(res[33m.[39mjson)[33m.[39m[34mtoHaveBeenCalledWith[39m({
    [90m   | [39m                             [31m^[39m
    [90m295| [39m                success[33m:[39m [35mtrue[39m[33m,[39m
    [90m296| [39m                data[33m:[39m expect[33m.[39m[34mobjectContaining[39m({

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[11/13]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/api/ai.controller.test.ts[2m > [22mAIController[2m > [22mclearCache[2m > [22mshould clear cache successfully
[31m[1mAssertionError[22m: expected "vi.fn()" to be called at least once[39m
[36m [2mâ¯[22m tests/unit/api/ai.controller.test.ts:[2m314:45[22m[39m
    [90m312| [39m            [35mawait[39m controller[33m.[39m[34mclearCache[39m(req[33m,[39m res)[33m;[39m
    [90m313| [39m
    [90m314| [39m            [34mexpect[39m(mockAIEngine[33m.[39mclearCache)[33m.[39m[34mtoHaveBeenCalled[39m()[33m;[39m
    [90m   | [39m                                            [31m^[39m
    [90m315| [39m            [34mexpect[39m(res[33m.[39mjson)[33m.[39m[34mtoHaveBeenCalledWith[39m({
    [90m316| [39m                success[33m:[39m [35mtrue[39m[33m,[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[12/13]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/api/ai.controller.test.ts[2m > [22mAIController[2m > [22mresetCostTracking[2m > [22mshould reset cost tracking successfully
[31m[1mAssertionError[22m: expected "vi.fn()" to be called at least once[39m
[36m [2mâ¯[22m tests/unit/api/ai.controller.test.ts:[2m332:52[22m[39m
    [90m330| [39m            [35mawait[39m controller[33m.[39m[34mresetCostTracking[39m(req[33m,[39m res)[33m;[39m
    [90m331| [39m
    [90m332| [39m            [34mexpect[39m(mockAIEngine[33m.[39mresetCostTracking)[33m.[39m[34mtoHaveBeenCalled[39m()[33m;[39m
    [90m   | [39m                                                   [31m^[39m
    [90m333| [39m            [34mexpect[39m(res[33m.[39mjson)[33m.[39m[34mtoHaveBeenCalledWith[39m({
    [90m334| [39m                success[33m:[39m [35mtrue[39m[33m,[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[13/13]âŽ¯[22m[39m


[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m13 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (14)[39m
[2m   Start at [22m 13:54:23
[2m   Duration [22m 2.24s[2m (transform 679ms, setup 55ms, import 1.81s, tests 85ms, environment 0ms)[22m

[1m[41m FAIL [49m[22m [31mTests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2mpackages/core/src/api/controllers/ai.controller.ts [22m[34mx1 [34m[39m
       [2m Filename pattern: [22m[34mtests/unit/api/ai.controller.test.ts[39m

{"level":30,"time":1765872647087,"pid":445907,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"ðŸ§  AI Cache initialized (Compression enabled > 1KB, Metrics enabled)"}
{"level":40,"time":1765872647156,"pid":445907,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"No SESSION_ENCRYPTION_KEY found. Generating temporary key (sessions will be lost on restart)."}
{"level":30,"time":1765872647204,"pid":445907,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","providers":["openai","anthropic","gemini"],"default":null,"msg":"ðŸ¤– LLM Manager initialized"}
{"level":30,"time":1765872647206,"pid":445907,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"ðŸ§  AI Engine initialized"}
{"level":30,"time":1765872648212,"pid":445907,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"ðŸŒ BrowserPool initialized with max 5 browsers"}
{"level":30,"time":1765872648504,"pid":445907,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"ðŸ“¦ CacheService initialized (Distributed Backend, default TTL: 3600s)"}
{"level":40,"time":1765872648516,"pid":445907,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"No proxies configured. Running without proxy rotation."}
{"level":30,"time":1765872648520,"pid":445907,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Rate limit set for google.com: 10 req/60s"}
{"level":30,"time":1765872648520,"pid":445907,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Rate limit set for linkedin.com: 5 req/60s"}
{"level":30,"time":1765872648520,"pid":445907,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Rate limit set for facebook.com: 10 req/60s"}
{"level":30,"time":1765872648521,"pid":445907,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Rate limit set for twitter.com: 15 req/60s"}
[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2mrunPipeline[2m > [22m[2mshould run full AI pipeline successfully
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m

{"level":50,"time":1765872648716,"pid":445907,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","error":{"name":"InternalServerError","message":"this.aiEngine.runPipeline is not a function","code":"INTERNAL_SERVER_ERROR","statusCode":500,"retryable":false,"context":{"originalError":"TypeError","stack":"TypeError: this.aiEngine.runPipeline is not a function\n    at AIController.runPipeline (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:18:48)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:62:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37\n    at Traces.$ (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)\n    at trace (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/test.BT8LKgU9.js:239:21)"},"stack":"InternalServerError: this.aiEngine.runPipeline is not a function\n    at toApplicationError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:200:16)\n    at logError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:213:22)\n    at AIController.runPipeline (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:31:13)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:62:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37"},"requestId":"test-request-id","endpoint":"ai/runPipeline","msg":"Server error occurred"}
[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2mrunPipeline[2m > [22m[2mshould handle pipeline errors
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m

[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2munderstandPage[2m > [22m[2mshould understand page successfully
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m

[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2mgenerateSelectors[2m > [22m[2mshould generate selectors successfully
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m

[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2minferSchema[2m > [22m[2mshould infer schema successfully
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m

[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2mplanStrategy[2m > [22m[2mshould plan strategy successfully
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m

[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2manalyzeBlocking[2m > [22m[2mshould analyze blocking successfully
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m

[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2mvalidateData[2m > [22m[2mshould validate data successfully
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m

[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2mvalidateData[2m > [22m[2mshould return validation errors
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m

[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2mhealthCheck[2m > [22m[2mshould return healthy status
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m

[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2mhealthCheck[2m > [22m[2mshould return degraded status when component unhealthy
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m

[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2mgetCostStats[2m > [22m[2mshould return cost statistics
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m

[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2mclearCache[2m > [22m[2mshould clear cache successfully
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m

[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2mresetCostTracking[2m > [22m[2mshould reset cost tracking successfully
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m

{"level":40,"time":1765872648726,"pid":445907,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
{"level":50,"time":1765872648728,"pid":445907,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","error":{"name":"InternalServerError","message":"this.aiEngine.runPipeline is not a function","code":"INTERNAL_SERVER_ERROR","statusCode":500,"retryable":false,"context":{"originalError":"TypeError","stack":"TypeError: this.aiEngine.runPipeline is not a function\n    at AIController.runPipeline (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:18:48)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:77:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37\n    at Traces.$ (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)\n    at trace (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/test.BT8LKgU9.js:239:21)"},"stack":"InternalServerError: this.aiEngine.runPipeline is not a function\n    at toApplicationError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:200:16)\n    at logError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:213:22)\n    at AIController.runPipeline (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:31:13)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:77:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37"},"requestId":"test-request-id","endpoint":"ai/runPipeline","msg":"Server error occurred"}
{"level":40,"time":1765872648737,"pid":445907,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
{"level":50,"time":1765872648740,"pid":445907,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","error":{"name":"InternalServerError","message":"Cannot read properties of undefined (reading 'execute')","code":"INTERNAL_SERVER_ERROR","statusCode":500,"retryable":false,"context":{"originalError":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'execute')\n    at AIController.understandPage (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:47:66)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:103:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37\n    at Traces.$ (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)\n    at trace (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/test.BT8LKgU9.js:239:21)"},"stack":"InternalServerError: Cannot read properties of undefined (reading 'execute')\n    at toApplicationError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:200:16)\n    at logError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:213:22)\n    at AIController.understandPage (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:55:13)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:103:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37"},"requestId":"test-request-id","endpoint":"ai/understandPage","msg":"Server error occurred"}
{"level":40,"time":1765872648760,"pid":445907,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
{"level":50,"time":1765872648768,"pid":445907,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","error":{"name":"InternalServerError","message":"Cannot read properties of undefined (reading 'execute')","code":"INTERNAL_SERVER_ERROR","statusCode":500,"retryable":false,"context":{"originalError":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'execute')\n    at AIController.generateSelectors (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:71:67)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:123:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37\n    at Traces.$ (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)\n    at trace (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/test.BT8LKgU9.js:239:21)"},"stack":"InternalServerError: Cannot read properties of undefined (reading 'execute')\n    at toApplicationError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:200:16)\n    at logError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:213:22)\n    at AIController.generateSelectors (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:79:13)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:123:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37"},"requestId":"test-request-id","endpoint":"ai","msg":"Server error occurred"}
{"level":40,"time":1765872648771,"pid":445907,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
{"level":50,"time":1765872648773,"pid":445907,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","error":{"name":"InternalServerError","message":"Cannot read properties of undefined (reading 'execute')","code":"INTERNAL_SERVER_ERROR","statusCode":500,"retryable":false,"context":{"originalError":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'execute')\n    at AIController.inferSchema (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:95:64)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:147:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37\n    at Traces.$ (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)\n    at trace (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/test.BT8LKgU9.js:239:21)"},"stack":"InternalServerError: Cannot read properties of undefined (reading 'execute')\n    at toApplicationError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:200:16)\n    at logError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:213:22)\n    at AIController.inferSchema (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:103:13)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:147:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37"},"requestId":"test-request-id","endpoint":"ai","msg":"Server error occurred"}
{"level":40,"time":1765872648775,"pid":445907,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
{"level":50,"time":1765872648779,"pid":445907,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","error":{"name":"InternalServerError","message":"Cannot read properties of undefined (reading 'execute')","code":"INTERNAL_SERVER_ERROR","statusCode":500,"retryable":false,"context":{"originalError":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'execute')\n    at AIController.planStrategy (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:119:65)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:168:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37\n    at Traces.$ (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)\n    at trace (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/test.BT8LKgU9.js:239:21)"},"stack":"InternalServerError: Cannot read properties of undefined (reading 'execute')\n    at toApplicationError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:200:16)\n    at logError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:213:22)\n    at AIController.planStrategy (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:127:13)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:168:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37"},"requestId":"test-request-id","endpoint":"ai","msg":"Server error occurred"}
{"level":40,"time":1765872648782,"pid":445907,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
 [31mâ¯[39m tests/unit/api/ai.controller.test.ts [2m([22m[2m14 tests[22m[2m | [22m[31m13 failed[39m[2m)[22m[32m 124[2mms[22m[39m
[31m       [31mÃ—[31m should run full AI pipeline successfully[39m[32m 24[2mms[22m[39m
       [32mâœ“[39m should handle pipeline errors[32m 11[2mms[22m[39m
[31m       [31mÃ—[31m should understand page successfully[39m[32m 21[2mms[22m[39m
[31m       [31mÃ—[31m should generate selectors successfully[39m[32m 13[2mms[22m[39m
[31m       [31mÃ—[31m should infer schema successfully[39m[32m 4[2mms[22m[39m
[31m       [31mÃ—[31m should plan strategy successfully[39m[32m 7[2mms[22m[39m
[31m       [31mÃ—[31m should analyze blocking successfully[39m[32m 4[2mms[22m[39m
[31m       [31mÃ—[31m should validate data successfully[39m[32m 6[2mms[22m[39m
[31m       [31mÃ—[31m should return validation errors[39m[32m 5[2mms[22m[39m
[31m       [31mÃ—[31m should return healthy status[39m[32m 5[2mms[22m[39m
[31m       [31mÃ—[31m should return degraded status when component unhealthy[39m[32m 5[2mms[22m[39m
[31m       [31mÃ—[31m should return cost statistics[39m[32m 4[2mms[22m[39m
[31m       [31mÃ—[31m should clear cache successfully[39m[32m 4[2mms[22m[39m
[31m       [31mÃ—[31m should reset cost tracking successfully[39m[32m 4[2mms[22m[39m
{"level":50,"time":1765872648785,"pid":445907,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","error":{"name":"InternalServerError","message":"Cannot read properties of undefined (reading 'execute')","code":"INTERNAL_SERVER_ERROR","statusCode":500,"retryable":false,"context":{"originalError":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'execute')\n    at AIController.analyzeBlocking (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:143:61)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:189:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37\n    at Traces.$ (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)\n    at trace (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/test.BT8LKgU9.js:239:21)"},"stack":"InternalServerError: Cannot read properties of undefined (reading 'execute')\n    at toApplicationError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:200:16)\n    at logError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:213:22)\n    at AIController.analyzeBlocking (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:151:13)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:189:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37"},"requestId":"test-request-id","endpoint":"ai","msg":"Server error occurred"}
{"level":40,"time":1765872648787,"pid":445907,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
{"level":50,"time":1765872648791,"pid":445907,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","error":{"name":"InternalServerError","message":"Cannot read properties of undefined (reading 'execute')","code":"INTERNAL_SERVER_ERROR","statusCode":500,"retryable":false,"context":{"originalError":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'execute')\n    at AIController.validateData (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:167:63)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:210:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37\n    at Traces.$ (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)\n    at trace (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/test.BT8LKgU9.js:239:21)"},"stack":"InternalServerError: Cannot read properties of undefined (reading 'execute')\n    at toApplicationError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:200:16)\n    at logError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:213:22)\n    at AIController.validateData (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:175:13)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:210:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37"},"requestId":"test-request-id","endpoint":"ai","msg":"Server error occurred"}
{"level":40,"time":1765872648793,"pid":445907,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
{"level":50,"time":1765872648795,"pid":445907,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","error":{"name":"InternalServerError","message":"Cannot read properties of undefined (reading 'execute')","code":"INTERNAL_SERVER_ERROR","statusCode":500,"retryable":false,"context":{"originalError":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'execute')\n    at AIController.validateData (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:167:63)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:229:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37\n    at Traces.$ (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)\n    at trace (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/test.BT8LKgU9.js:239:21)"},"stack":"InternalServerError: Cannot read properties of undefined (reading 'execute')\n    at toApplicationError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:200:16)\n    at logError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:213:22)\n    at AIController.validateData (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:175:13)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:229:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37"},"requestId":"test-request-id","endpoint":"ai","msg":"Server error occurred"}
{"level":40,"time":1765872648799,"pid":445907,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
{"level":50,"time":1765872648801,"pid":445907,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","error":{"name":"InternalServerError","message":"this.aiEngine.healthCheck is not a function","code":"INTERNAL_SERVER_ERROR","statusCode":500,"retryable":false,"context":{"originalError":"TypeError","stack":"TypeError: this.aiEngine.healthCheck is not a function\n    at AIController.healthCheck (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:185:48)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:249:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37\n    at Traces.$ (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)\n    at trace (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/test.BT8LKgU9.js:239:21)"},"stack":"InternalServerError: this.aiEngine.healthCheck is not a function\n    at toApplicationError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:200:16)\n    at logError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:213:22)\n    at AIController.healthCheck (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:197:13)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:249:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37"},"requestId":"test-request-id","endpoint":"ai","msg":"Server error occurred"}
{"level":40,"time":1765872648803,"pid":445907,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
{"level":50,"time":1765872648805,"pid":445907,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","error":{"name":"InternalServerError","message":"this.aiEngine.healthCheck is not a function","code":"INTERNAL_SERVER_ERROR","statusCode":500,"retryable":false,"context":{"originalError":"TypeError","stack":"TypeError: this.aiEngine.healthCheck is not a function\n    at AIController.healthCheck (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:185:48)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:271:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37\n    at Traces.$ (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)\n    at trace (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/test.BT8LKgU9.js:239:21)"},"stack":"InternalServerError: this.aiEngine.healthCheck is not a function\n    at toApplicationError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:200:16)\n    at logError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:213:22)\n    at AIController.healthCheck (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:197:13)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:271:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37"},"requestId":"test-request-id","endpoint":"ai","msg":"Server error occurred"}
{"level":40,"time":1765872648808,"pid":445907,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
{"level":50,"time":1765872648810,"pid":445907,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","error":{"name":"InternalServerError","message":"this.aiEngine.getCostStats is not a function","code":"INTERNAL_SERVER_ERROR","statusCode":500,"retryable":false,"context":{"originalError":"TypeError","stack":"TypeError: this.aiEngine.getCostStats is not a function\n    at AIController.getCostStats (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:207:41)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:292:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37\n    at Traces.$ (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)\n    at trace (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/test.BT8LKgU9.js:239:21)"},"stack":"InternalServerError: this.aiEngine.getCostStats is not a function\n    at toApplicationError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:200:16)\n    at logError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:213:22)\n    at AIController.getCostStats (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:215:13)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:292:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37"},"requestId":"test-request-id","endpoint":"ai","msg":"Server error occurred"}
{"level":40,"time":1765872648812,"pid":445907,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
{"level":50,"time":1765872648815,"pid":445907,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","error":{"name":"InternalServerError","message":"this.aiEngine.clearCache is not a function","code":"INTERNAL_SERVER_ERROR","statusCode":500,"retryable":false,"context":{"originalError":"TypeError","stack":"TypeError: this.aiEngine.clearCache is not a function\n    at AIController.clearCache (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:225:33)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:312:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37\n    at Traces.$ (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)\n    at trace (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/test.BT8LKgU9.js:239:21)"},"stack":"InternalServerError: this.aiEngine.clearCache is not a function\n    at toApplicationError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:200:16)\n    at logError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:213:22)\n    at AIController.clearCache (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:233:13)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:312:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37"},"requestId":"test-request-id","endpoint":"ai","msg":"Server error occurred"}
{"level":40,"time":1765872648817,"pid":445907,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
{"level":50,"time":1765872648820,"pid":445907,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","error":{"name":"InternalServerError","message":"this.aiEngine.resetCostTracking is not a function","code":"INTERNAL_SERVER_ERROR","statusCode":500,"retryable":false,"context":{"originalError":"TypeError","stack":"TypeError: this.aiEngine.resetCostTracking is not a function\n    at AIController.resetCostTracking (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:243:27)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:330:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37\n    at Traces.$ (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)\n    at trace (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/test.BT8LKgU9.js:239:21)"},"stack":"InternalServerError: this.aiEngine.resetCostTracking is not a function\n    at toApplicationError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:200:16)\n    at logError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:213:22)\n    at AIController.resetCostTracking (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:251:13)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:330:30\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37"},"requestId":"test-request-id","endpoint":"ai/resetCostTracking","msg":"Server error occurred"}

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m[1m[41m Failed Tests 13 [49m[22m[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[41m[1m FAIL [22m[49m tests/unit/api/ai.controller.test.ts[2m > [22mAIController[2m > [22mrunPipeline[2m > [22mshould run full AI pipeline successfully
[31m[1mAssertionError[22m: expected "vi.fn()" to be called at least once[39m
[36m [2mâ¯[22m tests/unit/api/ai.controller.test.ts:[2m64:46[22m[39m
    [90m 62| [39m            [35mawait[39m controller[33m.[39m[34mrunPipeline[39m(req[33m,[39m res)[33m;[39m
    [90m 63| [39m
    [90m 64| [39m            [34mexpect[39m(mockAIEngine[33m.[39mrunPipeline)[33m.[39m[34mtoHaveBeenCalled[39m()[33m;[39m
    [90m   | [39m                                             [31m^[39m
    [90m 65| [39m            [34mexpect[39m(res[33m.[39mjson)[33m.[39m[34mtoHaveBeenCalledWith[39m(mockResult)[33m;[39m
    [90m 66| [39m        })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/13]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/api/ai.controller.test.ts[2m > [22mAIController[2m > [22munderstandPage[2m > [22mshould understand page successfully
[31m[1mAssertionError[22m: expected "vi.fn()" to be called with arguments: [ { â€¦(2) } ][90m

Received: 

[1m  1st vi.fn() call:

[22m[2m  [[22m
[2m    {[22m
[32m-     "dataTypes": [[90m
[32m-       "products",[90m
[32m-       "prices",[90m
[32m-     ],[90m
[32m-     "purpose": "E-commerce product page",[90m
[31m+     "error": "Cannot read properties of undefined (reading 'execute')",[90m
[2m    },[22m
[2m  ][22m
[31m[90m

Number of calls: [1m1[22m
[31m[39m
[36m [2mâ¯[22m tests/unit/api/ai.controller.test.ts:[2m105:30[22m[39m
    [90m103| [39m            [35mawait[39m controller[33m.[39m[34munderstandPage[39m(req[33m,[39m res)[33m;[39m
    [90m104| [39m
    [90m105| [39m            [34mexpect[39m(res[33m.[39mjson)[33m.[39m[34mtoHaveBeenCalledWith[39m(mockUnderstanding)[33m;[39m
    [90m   | [39m                             [31m^[39m
    [90m106| [39m        })[33m;[39m
    [90m107| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/13]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/api/ai.controller.test.ts[2m > [22mAIController[2m > [22mgenerateSelectors[2m > [22mshould generate selectors successfully
[31m[1mAssertionError[22m: expected "vi.fn()" to be called with arguments: [ { price: '.price' } ][90m

Received: 

[1m  1st vi.fn() call:

[22m[2m  [[22m
[2m    {[22m
[32m-     "price": ".price",[90m
[31m+     "error": "Cannot read properties of undefined (reading 'execute')",[90m
[2m    },[22m
[2m  ][22m
[31m[90m

Number of calls: [1m1[22m
[31m[39m
[36m [2mâ¯[22m tests/unit/api/ai.controller.test.ts:[2m125:30[22m[39m
    [90m123| [39m            [35mawait[39m controller[33m.[39m[34mgenerateSelectors[39m(req[33m,[39m res)[33m;[39m
    [90m124| [39m
    [90m125| [39m            [34mexpect[39m(res[33m.[39mjson)[33m.[39m[34mtoHaveBeenCalledWith[39m(mockSelectors)[33m;[39m
    [90m   | [39m                             [31m^[39m
    [90m126| [39m        })[33m;[39m
    [90m127| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[3/13]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/api/ai.controller.test.ts[2m > [22mAIController[2m > [22minferSchema[2m > [22mshould infer schema successfully
[31m[1mAssertionError[22m: expected "vi.fn()" to be called with arguments: [ { type: 'object', â€¦(1) } ][90m

Received: 

[1m  1st vi.fn() call:

[22m[2m  [[22m
[2m    {[22m
[32m-     "properties": {[90m
[32m-       "price": {[90m
[32m-         "type": "number",[90m
[32m-       },[90m
[32m-       "title": {[90m
[32m-         "type": "string",[90m
[32m-       },[90m
[32m-     },[90m
[32m-     "type": "object",[90m
[31m+     "error": "Cannot read properties of undefined (reading 'execute')",[90m
[2m    },[22m
[2m  ][22m
[31m[90m

Number of calls: [1m1[22m
[31m[39m
[36m [2mâ¯[22m tests/unit/api/ai.controller.test.ts:[2m149:30[22m[39m
    [90m147| [39m            [35mawait[39m controller[33m.[39m[34minferSchema[39m(req[33m,[39m res)[33m;[39m
    [90m148| [39m
    [90m149| [39m            [34mexpect[39m(res[33m.[39mjson)[33m.[39m[34mtoHaveBeenCalledWith[39m(mockSchema)[33m;[39m
    [90m   | [39m                             [31m^[39m
    [90m150| [39m        })[33m;[39m
    [90m151| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[4/13]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/api/ai.controller.test.ts[2m > [22mAIController[2m > [22mplanStrategy[2m > [22mshould plan strategy successfully
[31m[1mAssertionError[22m: expected "vi.fn()" to be called with arguments: [ { approach: 'pagination', â€¦(1) } ][90m

Received: 

[1m  1st vi.fn() call:

[22m[2m  [[22m
[2m    {[22m
[32m-     "approach": "pagination",[90m
[32m-     "steps": [[90m
[32m-       "navigate",[90m
[32m-       "extract",[90m
[32m-       "next-page",[90m
[32m-     ],[90m
[31m+     "error": "Cannot read properties of undefined (reading 'execute')",[90m
[2m    },[22m
[2m  ][22m
[31m[90m

Number of calls: [1m1[22m
[31m[39m
[36m [2mâ¯[22m tests/unit/api/ai.controller.test.ts:[2m170:30[22m[39m
    [90m168| [39m            [35mawait[39m controller[33m.[39m[34mplanStrategy[39m(req[33m,[39m res)[33m;[39m
    [90m169| [39m
    [90m170| [39m            [34mexpect[39m(res[33m.[39mjson)[33m.[39m[34mtoHaveBeenCalledWith[39m(mockStrategy)[33m;[39m
    [90m   | [39m                             [31m^[39m
    [90m171| [39m        })[33m;[39m
    [90m172| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[5/13]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/api/ai.controller.test.ts[2m > [22mAIController[2m > [22manalyzeBlocking[2m > [22mshould analyze blocking successfully
[31m[1mAssertionError[22m: expected "vi.fn()" to be called with arguments: [ { hasCaptcha: true, â€¦(1) } ][90m

Received: 

[1m  1st vi.fn() call:

[22m[2m  [[22m
[2m    {[22m
[32m-     "hasCaptcha": true,[90m
[32m-     "hasRateLimit": false,[90m
[31m+     "error": "Cannot read properties of undefined (reading 'execute')",[90m
[2m    },[22m
[2m  ][22m
[31m[90m

Number of calls: [1m1[22m
[31m[39m
[36m [2mâ¯[22m tests/unit/api/ai.controller.test.ts:[2m191:30[22m[39m
    [90m189| [39m            [35mawait[39m controller[33m.[39m[34manalyzeBlocking[39m(req[33m,[39m res)[33m;[39m
    [90m190| [39m
    [90m191| [39m            [34mexpect[39m(res[33m.[39mjson)[33m.[39m[34mtoHaveBeenCalledWith[39m(mockAnalysis)[33m;[39m
    [90m   | [39m                             [31m^[39m
    [90m192| [39m        })[33m;[39m
    [90m193| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[6/13]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/api/ai.controller.test.ts[2m > [22mAIController[2m > [22mvalidateData[2m > [22mshould validate data successfully
[31m[1mAssertionError[22m: expected "vi.fn()" to be called with arguments: [ { isValid: true, errors: [] } ][90m

Received: 

[1m  1st vi.fn() call:

[22m[2m  [[22m
[2m    {[22m
[32m-     "errors": [],[90m
[32m-     "isValid": true,[90m
[31m+     "error": "Cannot read properties of undefined (reading 'execute')",[90m
[2m    },[22m
[2m  ][22m
[31m[90m

Number of calls: [1m1[22m
[31m[39m
[36m [2mâ¯[22m tests/unit/api/ai.controller.test.ts:[2m212:30[22m[39m
    [90m210| [39m            [35mawait[39m controller[33m.[39m[34mvalidateData[39m(req[33m,[39m res)[33m;[39m
    [90m211| [39m
    [90m212| [39m            [34mexpect[39m(res[33m.[39mjson)[33m.[39m[34mtoHaveBeenCalledWith[39m(mockValidation)[33m;[39m
    [90m   | [39m                             [31m^[39m
    [90m213| [39m        })[33m;[39m
    [90m214| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[7/13]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/api/ai.controller.test.ts[2m > [22mAIController[2m > [22mvalidateData[2m > [22mshould return validation errors
[31m[1mAssertionError[22m: expected "vi.fn()" to be called with arguments: [ { isValid: false, â€¦(1) } ][90m

Received: 

[1m  1st vi.fn() call:

[22m[2m  [[22m
[2m    {[22m
[32m-     "errors": [[90m
[32m-       "price must be a number",[90m
[32m-     ],[90m
[32m-     "isValid": false,[90m
[31m+     "error": "Cannot read properties of undefined (reading 'execute')",[90m
[2m    },[22m
[2m  ][22m
[31m[90m

Number of calls: [1m1[22m
[31m[39m
[36m [2mâ¯[22m tests/unit/api/ai.controller.test.ts:[2m231:30[22m[39m
    [90m229| [39m            [35mawait[39m controller[33m.[39m[34mvalidateData[39m(req[33m,[39m res)[33m;[39m
    [90m230| [39m
    [90m231| [39m            [34mexpect[39m(res[33m.[39mjson)[33m.[39m[34mtoHaveBeenCalledWith[39m(mockValidation)[33m;[39m
    [90m   | [39m                             [31m^[39m
    [90m232| [39m        })[33m;[39m
    [90m233| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[8/13]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/api/ai.controller.test.ts[2m > [22mAIController[2m > [22mhealthCheck[2m > [22mshould return healthy status
[31m[1mAssertionError[22m: expected "vi.fn()" to be called with arguments: [ 200 ][90m

Received: 

[1m  1st vi.fn() call:

[22m[2m  [[22m
[32m-   200,[90m
[31m+   500,[90m
[2m  ][22m
[31m[90m

Number of calls: [1m1[22m
[31m[39m
[36m [2mâ¯[22m tests/unit/api/ai.controller.test.ts:[2m251:32[22m[39m
    [90m249| [39m            [35mawait[39m controller[33m.[39m[34mhealthCheck[39m(req[33m,[39m res)[33m;[39m
    [90m250| [39m
    [90m251| [39m            [34mexpect[39m(res[33m.[39mstatus)[33m.[39m[34mtoHaveBeenCalledWith[39m([34m200[39m)[33m;[39m
    [90m   | [39m                               [31m^[39m
    [90m252| [39m            [34mexpect[39m(res[33m.[39mjson)[33m.[39m[34mtoHaveBeenCalledWith[39m(
    [90m253| [39m                expect[33m.[39m[34mobjectContaining[39m({

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[9/13]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/api/ai.controller.test.ts[2m > [22mAIController[2m > [22mhealthCheck[2m > [22mshould return degraded status when component unhealthy
[31m[1mAssertionError[22m: expected "vi.fn()" to be called with arguments: [ 503 ][90m

Received: 

[1m  1st vi.fn() call:

[22m[2m  [[22m
[32m-   503,[90m
[31m+   500,[90m
[2m  ][22m
[31m[90m

Number of calls: [1m1[22m
[31m[39m
[36m [2mâ¯[22m tests/unit/api/ai.controller.test.ts:[2m273:32[22m[39m
    [90m271| [39m            [35mawait[39m controller[33m.[39m[34mhealthCheck[39m(req[33m,[39m res)[33m;[39m
    [90m272| [39m
    [90m273| [39m            [34mexpect[39m(res[33m.[39mstatus)[33m.[39m[34mtoHaveBeenCalledWith[39m([34m503[39m)[33m;[39m
    [90m   | [39m                               [31m^[39m
    [90m274| [39m            [34mexpect[39m(res[33m.[39mjson)[33m.[39m[34mtoHaveBeenCalledWith[39m(
    [90m275| [39m                expect[33m.[39m[34mobjectContaining[39m({

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[10/13]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/api/ai.controller.test.ts[2m > [22mAIController[2m > [22mgetCostStats[2m > [22mshould return cost statistics
[31m[1mAssertionError[22m: expected "vi.fn()" to be called with arguments: [ { success: true, â€¦(2) } ][90m

Received: 

[1m  1st vi.fn() call:

[22m[2m  [[22m
[2m    {[22m
[32m-     "data": ObjectContaining {[90m
[32m-       "requestCount": 1000,[90m
[32m-       "totalCost": 12.5,[90m
[32m-     },[90m
[32m-     "success": true,[90m
[32m-     "timestamp": Any<String>,[90m
[31m+     "error": "this.aiEngine.getCostStats is not a function",[90m
[2m    },[22m
[2m  ][22m
[31m[90m

Number of calls: [1m1[22m
[31m[39m
[36m [2mâ¯[22m tests/unit/api/ai.controller.test.ts:[2m294:30[22m[39m
    [90m292| [39m            [35mawait[39m controller[33m.[39m[34mgetCostStats[39m(req[33m,[39m res)[33m;[39m
    [90m293| [39m
    [90m294| [39m            [34mexpect[39m(res[33m.[39mjson)[33m.[39m[34mtoHaveBeenCalledWith[39m({
    [90m   | [39m                             [31m^[39m
    [90m295| [39m                success[33m:[39m [35mtrue[39m[33m,[39m
    [90m296| [39m                data[33m:[39m expect[33m.[39m[34mobjectContaining[39m({

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[11/13]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/api/ai.controller.test.ts[2m > [22mAIController[2m > [22mclearCache[2m > [22mshould clear cache successfully
[31m[1mAssertionError[22m: expected "vi.fn()" to be called at least once[39m
[36m [2mâ¯[22m tests/unit/api/ai.controller.test.ts:[2m314:45[22m[39m
    [90m312| [39m            [35mawait[39m controller[33m.[39m[34mclearCache[39m(req[33m,[39m res)[33m;[39m
    [90m313| [39m
    [90m314| [39m            [34mexpect[39m(mockAIEngine[33m.[39mclearCache)[33m.[39m[34mtoHaveBeenCalled[39m()[33m;[39m
    [90m   | [39m                                            [31m^[39m
    [90m315| [39m            [34mexpect[39m(res[33m.[39mjson)[33m.[39m[34mtoHaveBeenCalledWith[39m({
    [90m316| [39m                success[33m:[39m [35mtrue[39m[33m,[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[12/13]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/api/ai.controller.test.ts[2m > [22mAIController[2m > [22mresetCostTracking[2m > [22mshould reset cost tracking successfully
[31m[1mAssertionError[22m: expected "vi.fn()" to be called at least once[39m
[36m [2mâ¯[22m tests/unit/api/ai.controller.test.ts:[2m332:52[22m[39m
    [90m330| [39m            [35mawait[39m controller[33m.[39m[34mresetCostTracking[39m(req[33m,[39m res)[33m;[39m
    [90m331| [39m
    [90m332| [39m            [34mexpect[39m(mockAIEngine[33m.[39mresetCostTracking)[33m.[39m[34mtoHaveBeenCalled[39m()[33m;[39m
    [90m   | [39m                                                   [31m^[39m
    [90m333| [39m            [34mexpect[39m(res[33m.[39mjson)[33m.[39m[34mtoHaveBeenCalledWith[39m({
    [90m334| [39m                success[33m:[39m [35mtrue[39m[33m,[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[13/13]âŽ¯[22m[39m


[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m13 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (14)[39m
[2m   Start at [22m 13:55:46
[2m   Duration [22m 2.45s

[1m[41m FAIL [49m[22m [31mTests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2mtests/unit/api/ai.controller.test.ts [22m[34mx2 [34m[39m
       [2m Filename pattern: [22m[34mtests/unit/api/ai.controller.test.ts[39m

{"level":30,"time":1765872662177,"pid":446162,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"ðŸ§  AI Cache initialized (Compression enabled > 1KB, Metrics enabled)"}
{"level":40,"time":1765872662232,"pid":446162,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"No SESSION_ENCRYPTION_KEY found. Generating temporary key (sessions will be lost on restart)."}
{"level":30,"time":1765872662260,"pid":446162,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","providers":["openai","anthropic","gemini"],"default":null,"msg":"ðŸ¤– LLM Manager initialized"}
{"level":30,"time":1765872662261,"pid":446162,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"ðŸ§  AI Engine initialized"}
{"level":30,"time":1765872662889,"pid":446162,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"ðŸŒ BrowserPool initialized with max 5 browsers"}
{"level":30,"time":1765872663138,"pid":446162,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"ðŸ“¦ CacheService initialized (Distributed Backend, default TTL: 3600s)"}
{"level":40,"time":1765872663163,"pid":446162,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"No proxies configured. Running without proxy rotation."}
{"level":30,"time":1765872663177,"pid":446162,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Rate limit set for google.com: 10 req/60s"}
{"level":30,"time":1765872663177,"pid":446162,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Rate limit set for linkedin.com: 5 req/60s"}
{"level":30,"time":1765872663177,"pid":446162,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Rate limit set for facebook.com: 10 req/60s"}
{"level":30,"time":1765872663177,"pid":446162,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Rate limit set for twitter.com: 15 req/60s"}
[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2mrunPipeline[2m > [22m[2mshould run full AI pipeline successfully
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m

{"level":40,"time":1765872663435,"pid":446162,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2mrunPipeline[2m > [22m[2mshould handle pipeline errors
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m

[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2munderstandPage[2m > [22m[2mshould understand page successfully
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m

[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2mgenerateSelectors[2m > [22m[2mshould generate selectors successfully
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m

[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2minferSchema[2m > [22m[2mshould infer schema successfully
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m

[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2mplanStrategy[2m > [22m[2mshould plan strategy successfully
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m

[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2manalyzeBlocking[2m > [22m[2mshould analyze blocking successfully
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m

[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2mvalidateData[2m > [22m[2mshould validate data successfully
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m

[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2mvalidateData[2m > [22m[2mshould return validation errors
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m

[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2mhealthCheck[2m > [22m[2mshould return healthy status
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m

[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2mhealthCheck[2m > [22m[2mshould return degraded status when component unhealthy
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m

[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2mgetCostStats[2m > [22m[2mshould return cost statistics
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m

[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2mclearCache[2m > [22m[2mshould clear cache successfully
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m

[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2mresetCostTracking[2m > [22m[2mshould reset cost tracking successfully
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m

{"level":50,"time":1765872663451,"pid":446162,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","error":{"name":"InternalServerError","message":"Pipeline failed","code":"INTERNAL_SERVER_ERROR","statusCode":500,"retryable":false,"context":{"originalError":"Error","stack":"Error: Pipeline failed\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:75:56\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37\n    at Traces.$ (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)\n    at trace (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/test.BT8LKgU9.js:239:21)\n    at runTest (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:12)"},"stack":"InternalServerError: Pipeline failed\n    at toApplicationError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:200:16)\n    at logError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:213:22)\n    at AIController.runPipeline (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:31:13)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:77:13\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:20"},"requestId":"test-request-id","endpoint":"ai/runPipeline","msg":"Server error occurred"}
{"level":40,"time":1765872663457,"pid":446162,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
{"level":40,"time":1765872663461,"pid":446162,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
{"level":40,"time":1765872663465,"pid":446162,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
{"level":40,"time":1765872663467,"pid":446162,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
{"level":40,"time":1765872663470,"pid":446162,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
{"level":40,"time":1765872663473,"pid":446162,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
{"level":40,"time":1765872663477,"pid":446162,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
{"level":40,"time":1765872663481,"pid":446162,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
{"level":40,"time":1765872663483,"pid":446162,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
{"level":40,"time":1765872663485,"pid":446162,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
{"level":40,"time":1765872663488,"pid":446162,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
{"level":40,"time":1765872663490,"pid":446162,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
 [32mâœ“[39m tests/unit/api/ai.controller.test.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 73[2mms[22m[39m

[2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[32m14 passed[39m[22m[90m (14)[39m
[2m   Start at [22m 13:56:01
[2m   Duration [22m 1.95s

[1m[42m PASS [49m[22m [32mWaiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2mpackages/scrapers/google-places/package.json [22m[34mx3 [34m[39m
       [2m Filename pattern: [22m[34mtests/unit/api/ai.controller.test.ts[39m

{"level":30,"time":1765872754023,"pid":447453,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"ðŸ§  AI Cache initialized (Compression enabled > 1KB, Metrics enabled)"}
{"level":40,"time":1765872754278,"pid":447453,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"No SESSION_ENCRYPTION_KEY found. Generating temporary key (sessions will be lost on restart)."}
{"level":30,"time":1765872754388,"pid":447453,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","providers":["openai","anthropic","gemini"],"default":null,"msg":"ðŸ¤– LLM Manager initialized"}
{"level":30,"time":1765872754393,"pid":447453,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"ðŸ§  AI Engine initialized"}
{"level":30,"time":1765872756139,"pid":447453,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"ðŸŒ BrowserPool initialized with max 5 browsers"}
{"level":30,"time":1765872756718,"pid":447453,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"ðŸ“¦ CacheService initialized (Distributed Backend, default TTL: 3600s)"}
{"level":40,"time":1765872756732,"pid":447453,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"No proxies configured. Running without proxy rotation."}
{"level":30,"time":1765872756747,"pid":447453,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Rate limit set for google.com: 10 req/60s"}
{"level":30,"time":1765872756747,"pid":447453,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Rate limit set for linkedin.com: 5 req/60s"}
{"level":30,"time":1765872756747,"pid":447453,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Rate limit set for facebook.com: 10 req/60s"}
{"level":30,"time":1765872756747,"pid":447453,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Rate limit set for twitter.com: 15 req/60s"}
[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2mrunPipeline[2m > [22m[2mshould run full AI pipeline successfully
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m

{"level":40,"time":1765872757339,"pid":447453,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2mrunPipeline[2m > [22m[2mshould handle pipeline errors
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m

[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2munderstandPage[2m > [22m[2mshould understand page successfully
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m

[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2mgenerateSelectors[2m > [22m[2mshould generate selectors successfully
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m

[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2minferSchema[2m > [22m[2mshould infer schema successfully
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m

[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2mplanStrategy[2m > [22m[2mshould plan strategy successfully
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m

[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2manalyzeBlocking[2m > [22m[2mshould analyze blocking successfully
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m

[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2mvalidateData[2m > [22m[2mshould validate data successfully
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m

[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2mvalidateData[2m > [22m[2mshould return validation errors
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m

[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2mhealthCheck[2m > [22m[2mshould return healthy status
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m

[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2mhealthCheck[2m > [22m[2mshould return degraded status when component unhealthy
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m

[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2mgetCostStats[2m > [22m[2mshould return cost statistics
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m

[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2mclearCache[2m > [22m[2mshould clear cache successfully
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m

[90mstdout[2m | tests/unit/api/ai.controller.test.ts[2m > [22m[2mAIController[2m > [22m[2mresetCostTracking[2m > [22m[2mshould reset cost tracking successfully
[22m[39mDEBUG: Registered Services: [
  [32m'CircuitBreakerService'[39m,
  [32m'EvasionService'[39m,
  [32m'GridService'[39m,
  [32m'AIEngine'[39m
]
DEBUG: Tokens.AIEngine: AIEngine
DEBUG: Is AIEngine Registered? [33mtrue[39m

{"level":50,"time":1765872757361,"pid":447453,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","error":{"name":"InternalServerError","message":"Pipeline failed","code":"INTERNAL_SERVER_ERROR","statusCode":500,"retryable":false,"context":{"originalError":"Error","stack":"Error: Pipeline failed\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:75:56\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1240:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1206:10)\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:37\n    at Traces.$ (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)\n    at trace (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/vitest/dist/chunks/test.BT8LKgU9.js:239:21)\n    at runTest (file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:1650:12)"},"stack":"InternalServerError: Pipeline failed\n    at toApplicationError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:200:16)\n    at logError (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/shared/dist/types/errors.js:213:22)\n    at AIController.runPipeline (/home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/packages/core/src/api/controllers/ai.controller.ts:31:13)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at /home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/tests/unit/api/ai.controller.test.ts:77:13\n    at file:///home/cosmic-soul/Desktop/my-pjct/NxScraper-engine/node_modules/@vitest/runner/dist/index.js:915:20"},"requestId":"test-request-id","endpoint":"ai/runPipeline","msg":"Server error occurred"}
{"level":40,"time":1765872757371,"pid":447453,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
{"level":40,"time":1765872757380,"pid":447453,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
{"level":40,"time":1765872757391,"pid":447453,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
{"level":40,"time":1765872757394,"pid":447453,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
{"level":40,"time":1765872757397,"pid":447453,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
{"level":40,"time":1765872757400,"pid":447453,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
{"level":40,"time":1765872757403,"pid":447453,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
{"level":40,"time":1765872757407,"pid":447453,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
{"level":40,"time":1765872757410,"pid":447453,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
{"level":40,"time":1765872757413,"pid":447453,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
{"level":40,"time":1765872757416,"pid":447453,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
{"level":40,"time":1765872757419,"pid":447453,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"Service AIEngine is already registered. Overwriting..."}
 [32mâœ“[39m tests/unit/api/ai.controller.test.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 121[2mms[22m[39m

[2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[32m14 passed[39m[22m[90m (14)[39m
[2m   Start at [22m 13:57:32
[2m   Duration [22m 4.80s

[1m[42m PASS [49m[22m [32mWaiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2mpackages/shared/dist/types/scraper.interface.js [22m[34mx4 [34m[39m
       [2m Filename pattern: [22m[34mtests/unit/api/ai.controller.test.ts[39m

{"level":30,"time":1765872782691,"pid":448350,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"ðŸ§  AI Cache initialized (Compression enabled > 1KB, Metrics enabled)"}
{"level":40,"time":1765872782803,"pid":448350,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"No SESSION_ENCRYPTION_KEY found. Generating temporary key (sessions will be lost on restart)."}
{"level":30,"time":1765872782843,"pid":448350,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","providers":["openai","anthropic","gemini"],"default":null,"msg":"ðŸ¤– LLM Manager initialized"}
{"level":30,"time":1765872782844,"pid":448350,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"ðŸ§  AI Engine initialized"}
{"level":30,"time":1765872784555,"pid":448350,"hostname":"cosmic-soul-IdeaPad-Slim-3-15IRH8","name":"nx-scraper","msg":"ðŸŒ BrowserPool initialized with max 5 browsers"}
